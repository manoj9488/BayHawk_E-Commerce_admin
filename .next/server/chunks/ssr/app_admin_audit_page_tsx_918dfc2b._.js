module.exports=[15414,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(54161),h=a.i(87682),i=a.i(30330),j=a.i(30342),k=a.i(65733),l=a.i(91965),m=a.i(87532),n=a.i(67937),n=n,o=a.i(84505),p=a.i(87654),q=a.i(46842),r=a.i(83497),s=a.i(38784),t=a.i(21161),u=a.i(77156),v=a.i(13749),w=a.i(50522),x=a.i(33350),y=a.i(56711),z=a.i(43672),A=a.i(23292);function B(){let{auditLogs:a,restoreAuditLog:B}=(0,z.useStore)(),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)(),[I,J]=(0,c.useState)(1),K=a.filter(a=>{let b=a.action.toLowerCase().includes(C.toLowerCase())||a.entityName.toLowerCase().includes(C.toLowerCase())||a.user.name.toLowerCase().includes(C.toLowerCase()),c="all"===E||a.category===E;return b&&c}),L=K.slice((I-1)*10,10*I),M=Math.ceil(K.length/10);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Audit Logs"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track all changes and actions across the system"})]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>{A.toast.success("Audit logs exported successfully!")},children:[(0,b.jsx)(o.Download,{className:"mr-2 h-4 w-4"}),"Export Logs"]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-chart-1/10",children:(0,b.jsx)(l.History,{className:"h-5 w-5 text-chart-1"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Logs"})]})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-chart-2/10",children:(0,b.jsx)(s.ShoppingCart,{className:"h-5 w-5 text-chart-2"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.filter(a=>"order"===a.category).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Order Changes"})]})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-success/10",children:(0,b.jsx)(r.Package,{className:"h-5 w-5 text-success"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.filter(a=>"product"===a.category).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Product Updates"})]})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-warning/10",children:(0,b.jsx)(p.RotateCcw,{className:"h-5 w-5 text-warning"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.filter(a=>a.canRestore).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Restorable Actions"})]})]})})]}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Search logs...",value:C,onChange:a=>D(a.target.value),className:"pl-9"})]}),(0,b.jsxs)(h.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Category"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Categories"}),(0,b.jsx)(h.SelectItem,{value:"order",children:"Orders"}),(0,b.jsx)(h.SelectItem,{value:"product",children:"Products"}),(0,b.jsx)(h.SelectItem,{value:"user",children:"Users"}),(0,b.jsx)(h.SelectItem,{value:"settings",children:"Settings"}),(0,b.jsx)(h.SelectItem,{value:"team",children:"Team"}),(0,b.jsx)(h.SelectItem,{value:"coupon",children:"Coupons"})]})]}),(0,b.jsxs)(j.Popover,{children:[(0,b.jsx)(j.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",className:"w-[180px] justify-start text-left font-normal bg-transparent",children:[(0,b.jsx)(n.default,{className:"mr-2 h-4 w-4"}),G?(0,y.format)(G,"PPP"):"Pick a date"]})}),(0,b.jsx)(j.PopoverContent,{className:"w-auto p-0",children:(0,b.jsx)(i.Calendar,{mode:"single",selected:G,onSelect:H,initialFocus:!0})})]})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Action"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Category"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Entity"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"User"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Time"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===L.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No audit logs found"})}):L.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border/50 hover:bg-secondary/50",children:[(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)("span",{className:"font-medium",children:a.action})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)(g.Badge,{variant:"outline",className:(a=>{switch(a){case"order":return"bg-chart-1/10 text-chart-1 border-chart-1/30";case"product":return"bg-chart-2/10 text-chart-2 border-chart-2/30";case"user":return"bg-chart-4/10 text-chart-4 border-chart-4/30";case"settings":return"bg-warning/10 text-warning border-warning/30";case"team":return"bg-success/10 text-success border-success/30";case"coupon":return"bg-primary/10 text-primary border-primary/30";default:return""}})(a.category),children:[(0,b.jsx)("span",{className:"mr-1",children:(a=>{switch(a){case"order":return(0,b.jsx)(s.ShoppingCart,{className:"h-4 w-4"});case"product":return(0,b.jsx)(r.Package,{className:"h-4 w-4"});case"user":case"team":return(0,b.jsx)(q.User,{className:"h-4 w-4"});case"settings":return(0,b.jsx)(t.Settings,{className:"h-4 w-4"});case"coupon":return(0,b.jsx)(x.Tag,{className:"h-4 w-4"});default:return(0,b.jsx)(l.History,{className:"h-4 w-4"})}})(a.category)}),a.category]})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.entityName}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.entityId})]})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.user.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.user.role})]})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.timestamp.toLocaleTimeString()}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.timestamp.toLocaleDateString()})]})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(k.Dialog,{children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(u.Eye,{className:"h-4 w-4"})})}),(0,b.jsxs)(k.DialogContent,{children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Audit Log Details"}),(0,b.jsx)(k.DialogDescription,{children:a.action})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Entity"}),(0,b.jsx)("p",{className:"font-medium",children:a.entityName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Entity ID"}),(0,b.jsx)("p",{className:"font-mono",children:a.entityId})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"User"}),(0,b.jsx)("p",{className:"font-medium",children:a.user.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"IP Address"}),(0,b.jsx)("p",{className:"font-mono",children:a.ipAddress})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"Changes"}),(0,b.jsx)("div",{className:"space-y-2",children:a.changes.map((a,c)=>(0,b.jsxs)("div",{className:"p-3 bg-secondary rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm font-medium capitalize",children:a.field}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("span",{className:"text-sm text-destructive line-through",children:a.oldValue}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"â†’"}),(0,b.jsx)("span",{className:"text-sm text-success",children:a.newValue})]})]},c))})]})]})]})]}),a.canRestore&&(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"text-warning",onClick:()=>{var b,c;return b=a.id,c=a.entityName,void(B(b),A.toast.success(`Successfully restored: ${c}`))},children:(0,b.jsx)(p.RotateCcw,{className:"h-4 w-4"})})]})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-border",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",0===K.length?0:(I-1)*10+1," to"," ",Math.min(10*I,K.length)," of ",K.length," entries"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"icon",onClick:()=>J(a=>Math.max(1,a-1)),disabled:1===I,children:(0,b.jsx)(v.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("span",{className:"text-sm",children:["Page ",I," of ",M||1]}),(0,b.jsx)(e.Button,{variant:"outline",size:"icon",onClick:()=>J(a=>Math.min(M,a+1)),disabled:I===M||0===M,children:(0,b.jsx)(w.ChevronRight,{className:"h-4 w-4"})})]})]})]})})]})}a.s(["default",()=>B],15414)}];

//# sourceMappingURL=app_admin_audit_page_tsx_918dfc2b._.js.map