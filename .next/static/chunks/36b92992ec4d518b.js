(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40160,e=>{"use strict";let s=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>s],40160)},86536,e=>{"use strict";let s=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},67240,e=>{"use strict";let s=(0,e.i(75254).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>s],67240)},51975,e=>{"use strict";let s=(0,e.i(75254).default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>s],51975)},27091,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(70065),r=e.i(67881),l=e.i(23750),c=e.i(94179),n=e.i(62870),i=e.i(57734),d=e.i(59377),o=e.i(30374),x=e.i(27516),m=e.i(55436),h=e.i(61277),h=h,u=e.i(40160),j=e.i(67240),g=e.i(84614),p=e.i(88844),N=e.i(1928),f=e.i(39616),v=e.i(86536),y=e.i(73375),C=e.i(63059),w=e.i(51975),b=e.i(1851),S=e.i(18589),k=e.i(46696);function T(){let{auditLogs:e,restoreAuditLog:T}=(0,S.useStore)(),[P,L]=(0,t.useState)(""),[D,A]=(0,t.useState)("all"),[I,R]=(0,t.useState)(),[B,M]=(0,t.useState)(1),z=e.filter(e=>{let s=e.action.toLowerCase().includes(P.toLowerCase())||e.entityName.toLowerCase().includes(P.toLowerCase())||e.user.name.toLowerCase().includes(P.toLowerCase()),t="all"===D||e.category===D;return s&&t}),E=z.slice((B-1)*10,10*B),U=Math.ceil(z.length/10);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Audit Logs"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Track all changes and actions across the system"})]}),(0,s.jsxs)(r.Button,{variant:"outline",onClick:()=>{k.toast.success("Audit logs exported successfully!")},children:[(0,s.jsx)(u.Download,{className:"mr-2 h-4 w-4"}),"Export Logs"]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-chart-1/10",children:(0,s.jsx)(x.History,{className:"h-5 w-5 text-chart-1"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Logs"})]})]})}),(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-chart-2/10",children:(0,s.jsx)(N.ShoppingCart,{className:"h-5 w-5 text-chart-2"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"order"===e.category).length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Order Changes"})]})]})}),(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-success/10",children:(0,s.jsx)(p.Package,{className:"h-5 w-5 text-success"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"product"===e.category).length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Product Updates"})]})]})}),(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-warning/10",children:(0,s.jsx)(j.RotateCcw,{className:"h-5 w-5 text-warning"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>e.canRestore).length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Restorable Actions"})]})]})})]}),(0,s.jsx)(a.Card,{children:(0,s.jsx)(a.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(m.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,s.jsx)(l.Input,{placeholder:"Search logs...",value:P,onChange:e=>L(e.target.value),className:"pl-9"})]}),(0,s.jsxs)(n.Select,{value:D,onValueChange:A,children:[(0,s.jsx)(n.SelectTrigger,{className:"w-[180px]",children:(0,s.jsx)(n.SelectValue,{placeholder:"Category"})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"all",children:"All Categories"}),(0,s.jsx)(n.SelectItem,{value:"order",children:"Orders"}),(0,s.jsx)(n.SelectItem,{value:"product",children:"Products"}),(0,s.jsx)(n.SelectItem,{value:"user",children:"Users"}),(0,s.jsx)(n.SelectItem,{value:"settings",children:"Settings"}),(0,s.jsx)(n.SelectItem,{value:"team",children:"Team"}),(0,s.jsx)(n.SelectItem,{value:"coupon",children:"Coupons"})]})]}),(0,s.jsxs)(d.Popover,{children:[(0,s.jsx)(d.PopoverTrigger,{asChild:!0,children:(0,s.jsxs)(r.Button,{variant:"outline",className:"w-[180px] justify-start text-left font-normal bg-transparent",children:[(0,s.jsx)(h.default,{className:"mr-2 h-4 w-4"}),I?(0,b.format)(I,"PPP"):"Pick a date"]})}),(0,s.jsx)(d.PopoverContent,{className:"w-auto p-0",children:(0,s.jsx)(i.Calendar,{mode:"single",selected:I,onSelect:R,initialFocus:!0})})]})]})})}),(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"p-0",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Action"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Category"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Entity"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"User"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Time"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===E.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No audit logs found"})}):E.map(e=>(0,s.jsxs)("tr",{className:"border-b border-border/50 hover:bg-secondary/50",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"font-medium",children:e.action})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)(c.Badge,{variant:"outline",className:(e=>{switch(e){case"order":return"bg-chart-1/10 text-chart-1 border-chart-1/30";case"product":return"bg-chart-2/10 text-chart-2 border-chart-2/30";case"user":return"bg-chart-4/10 text-chart-4 border-chart-4/30";case"settings":return"bg-warning/10 text-warning border-warning/30";case"team":return"bg-success/10 text-success border-success/30";case"coupon":return"bg-primary/10 text-primary border-primary/30";default:return""}})(e.category),children:[(0,s.jsx)("span",{className:"mr-1",children:(e=>{switch(e){case"order":return(0,s.jsx)(N.ShoppingCart,{className:"h-4 w-4"});case"product":return(0,s.jsx)(p.Package,{className:"h-4 w-4"});case"user":case"team":return(0,s.jsx)(g.User,{className:"h-4 w-4"});case"settings":return(0,s.jsx)(f.Settings,{className:"h-4 w-4"});case"coupon":return(0,s.jsx)(w.Tag,{className:"h-4 w-4"});default:return(0,s.jsx)(x.History,{className:"h-4 w-4"})}})(e.category)}),e.category]})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.entityName}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.entityId})]})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.user.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.user.role})]})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.timestamp.toLocaleTimeString()}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.timestamp.toLocaleDateString()})]})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(o.Dialog,{children:[(0,s.jsx)(o.DialogTrigger,{asChild:!0,children:(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(v.Eye,{className:"h-4 w-4"})})}),(0,s.jsxs)(o.DialogContent,{children:[(0,s.jsxs)(o.DialogHeader,{children:[(0,s.jsx)(o.DialogTitle,{children:"Audit Log Details"}),(0,s.jsx)(o.DialogDescription,{children:e.action})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Entity"}),(0,s.jsx)("p",{className:"font-medium",children:e.entityName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Entity ID"}),(0,s.jsx)("p",{className:"font-mono",children:e.entityId})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"User"}),(0,s.jsx)("p",{className:"font-medium",children:e.user.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"IP Address"}),(0,s.jsx)("p",{className:"font-mono",children:e.ipAddress})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground mb-2",children:"Changes"}),(0,s.jsx)("div",{className:"space-y-2",children:e.changes.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 bg-secondary rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium capitalize",children:e.field}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("span",{className:"text-sm text-destructive line-through",children:e.oldValue}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"â†’"}),(0,s.jsx)("span",{className:"text-sm text-success",children:e.newValue})]})]},t))})]})]})]})]}),e.canRestore&&(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"text-warning",onClick:()=>{var s,t;return s=e.id,t=e.entityName,void(T(s),k.toast.success(`Successfully restored: ${t}`))},children:(0,s.jsx)(j.RotateCcw,{className:"h-4 w-4"})})]})})]},e.id))})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-border",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",0===z.length?0:(B-1)*10+1," to"," ",Math.min(10*B,z.length)," of ",z.length," entries"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Button,{variant:"outline",size:"icon",onClick:()=>M(e=>Math.max(1,e-1)),disabled:1===B,children:(0,s.jsx)(y.ChevronLeft,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-sm",children:["Page ",B," of ",U||1]}),(0,s.jsx)(r.Button,{variant:"outline",size:"icon",onClick:()=>M(e=>Math.min(U,e+1)),disabled:B===U||0===U,children:(0,s.jsx)(C.ChevronRight,{className:"h-4 w-4"})})]})]})]})})]})}e.s(["default",()=>T],27091)}]);